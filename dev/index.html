<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ModelParameters · ModelParameters.jl</title><meta name="title" content="ModelParameters · ModelParameters.jl"/><meta property="og:title" content="ModelParameters · ModelParameters.jl"/><meta property="twitter:title" content="ModelParameters · ModelParameters.jl"/><meta name="description" content="Documentation for ModelParameters.jl."/><meta property="og:description" content="Documentation for ModelParameters.jl."/><meta property="twitter:description" content="Documentation for ModelParameters.jl."/><meta property="og:url" content="https://rafaqz.github.io/ModelParameters.jl/"/><meta property="twitter:url" content="https://rafaqz.github.io/ModelParameters.jl/"/><link rel="canonical" href="https://rafaqz.github.io/ModelParameters.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>ModelParameters.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>ModelParameters</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Types"><span>Types</span></a></li><li><a class="tocitem" href="#Methods"><span>Methods</span></a></li></ul></li><li><a class="tocitem" href="interactmodels/">InteractModels</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>ModelParameters</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>ModelParameters</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/rafaqz/ModelParameters.jl/blob/master/docs/src/index.md#L" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ModelParameters"><a class="docs-heading-anchor" href="#ModelParameters">ModelParameters</a><a id="ModelParameters-1"></a><a class="docs-heading-anchor-permalink" href="#ModelParameters" title="Permalink"></a></h1><ul><li><a href="#ModelParameters.ModelParameters"><code>ModelParameters.ModelParameters</code></a></li><li><a href="#ModelParameters.AbstractModel"><code>ModelParameters.AbstractModel</code></a></li><li><a href="#ModelParameters.AbstractParam"><code>ModelParameters.AbstractParam</code></a></li><li><a href="#ModelParameters.MakieModel"><code>ModelParameters.MakieModel</code></a></li><li><a href="#ModelParameters.Model"><code>ModelParameters.Model</code></a></li><li><a href="#ModelParameters.Param"><code>ModelParameters.Param</code></a></li><li><a href="#ModelParameters.RealParam"><code>ModelParameters.RealParam</code></a></li><li><a href="#ModelParameters.StaticModel"><code>ModelParameters.StaticModel</code></a></li><li><a href="#ModelParameters.component-Union{Tuple{Type{T}}, Tuple{T}} where T"><code>ModelParameters.component</code></a></li><li><a href="#ModelParameters.groupparams-Tuple{AbstractModel}"><code>ModelParameters.groupparams</code></a></li><li><a href="#ModelParameters.mapflat-Union{Tuple{T}, Tuple{Any, Any}} where T"><code>ModelParameters.mapflat</code></a></li><li><a href="#ModelParameters.params"><code>ModelParameters.params</code></a></li><li><a href="#ModelParameters.printparams"><code>ModelParameters.printparams</code></a></li><li><a href="#ModelParameters.setparent"><code>ModelParameters.setparent</code></a></li><li><a href="#ModelParameters.setparent!"><code>ModelParameters.setparent!</code></a></li><li><a href="#ModelParameters.stripparams"><code>ModelParameters.stripparams</code></a></li><li><a href="#ModelParameters.stripunits"><code>ModelParameters.stripunits</code></a></li><li><a href="#ModelParameters.update"><code>ModelParameters.update</code></a></li><li><a href="#ModelParameters.update!"><code>ModelParameters.update!</code></a></li><li><a href="#ModelParameters.withunits"><code>ModelParameters.withunits</code></a></li><li><a href="interactmodels/#InteractModels.InteractModels"><code>InteractModels.InteractModels</code></a></li><li><a href="interactmodels/#InteractModels.InteractModel"><code>InteractModels.InteractModel</code></a></li><li><a href="interactmodels/#InteractModels.attach_sliders!-Tuple{Any, AbstractModel}"><code>InteractModels.attach_sliders!</code></a></li></ul><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.ModelParameters" href="#ModelParameters.ModelParameters"><code>ModelParameters.ModelParameters</code></a> — <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p><strong>ModelParameters</strong></p><p><a href="https://rafaqz.github.io/ModelParameters.jl/stable"><img src="https://img.shields.io/badge/docs-stable-blue.svg" alt="Stable"/></a> <a href="https://rafaqz.github.io/ModelParameters.jl/dev"><img src="https://img.shields.io/badge/docs-dev-blue.svg" alt="Dev"/></a> <a href="https://github.com/rafaqz/ModelParameters.jl/actions?query=workflow%3ACI"><img src="https://github.com/rafaqz/ModelParameters.jl/workflows/CI/badge.svg" alt="CI"/></a> <a href="https://codecov.io/gh/rafaqz/ModelParameters.jl"><img src="https://codecov.io/gh/rafaqz/ModelParameters.jl/branch/master/graph/badge.svg" alt="Coverage"/></a></p><p>ModelParameters simplifies the process of writing and using complex, high performance models, decoupling technical decisions about model structure and composition from usability concerns. </p><p>It provides linear indexing of parameters, a Tables.jl interface, and controllable Interact.jl Interfaces (via InteractModels.jl) – for any object, of any complexity. Parameters of immutable objects can be updated from a vector, tuple or table using a single command, rebuilding the object with the new values.</p><p><strong>Use case</strong></p><p>ModelParameters.jl is designed to help writing physics/environmental/ecological models with heterogeneous structure and multiple formulation options. </p><p>Once these models grow beyond a certain complexity it becomes preferable to organise them in modular way, and to reuse components in variants in other models. This pattern is seen in climate models and land models related to CLIMA project, and in ecological modelling tools like DynamicGrids.jl and GrowthMaps.jl that this package was built for.</p><p>Models may be structured as a composed nested hierarchy of structs, <code>Tuple</code> chains of objects, <code>NameTuple</code>s, or some combination of the above. For performance, or running on GPUs, immutability is often necessary.</p><p>The problem comes when trying to use these models in Optim.jl, or run sensitivity analysis on them with DiffEqSensitivity.jl, or pass priors to a Bayesian modelling package. These packages often need parameter values, bounds and priors as <code>Vector</code>s. They may also need to update the model with new parameters as required. Writing out these conversions for every model combination is error prone and inefficient - especially with nested immutable models, that need to be rebuilt to change the parameters.</p><p>ModelParameters.jl can convert any arbitrarily complex model built with structs, <code>Tuple</code>s and <code>NamedTuple</code>s into vectors of values, bounds, priors, and anything else you need to attach, and easily reconstruct the whole model when they are updated. This is facilitated by wrapping your parameters, wherever they are in the model, in a <code>Param</code>:</p><pre><code class="language-julia hljs">using ModelParameters

Base.@kwdef struct Submodel1{A,B}
    α::A = Param(0.8, bounds=(0.2, 0.9))
    β::B = Param(0.5, bounds=(0.7, 0.4))
end

Base.@kwdef struct Submodel2{Γ}
    γ::Γ = Param(1e-3, bounds=(1e-4, 1e-2))
end

Base.@kwdef struct SubModel3{Λ,X}
    λ::Λ = Param(0.8, bounds=(0.2, 0.9))
    x::X = Submodel2()
end

julia&gt; model = Model((Submodel1(), SubModel3()))
Model with parent object of type: 

Tuple{Submodel1{Param{Float64,NamedTuple{(:val, :bounds),Tuple{Float64,Tuple{Float64,Float64}}}},Param{Float64,NamedTuple{(:val, :bounds),Tuple{Float64,Tuple{Float64,Float64}}}}},SubModel3{Param{Float64,NamedTuple{(:val, :bounds),Tuple{Float64,Tuple{Float64,Float64}}}},Submodel2{Param{Float64,NamedTuple{(:val, :bounds)
,Tuple{Float64,Tuple{Float64,Float64}}}}}}}

And parameters:
┌───────────┬───────┬───────┬────────────────┐
│ component │ field │   val │         bounds │
├───────────┼───────┼───────┼────────────────┤
│ Submodel1 │     α │   0.8 │     (0.2, 0.9) │
│ Submodel1 │     β │   0.5 │     (0.7, 0.4) │
│ SubModel3 │     λ │   0.8 │     (0.2, 0.9) │
│ Submodel2 │     γ │ 0.001 │ (0.0001, 0.01) │
└───────────┴───────┴───────┴────────────────┘

julia&gt; model[:val]
(0.8, 0.5, 0.8, 0.001)</code></pre><p>To get the model values as a vector for Optim.jl, simply:</p><pre><code class="language-julia hljs">collect(model[:val])</code></pre><p><strong>What are Params?</strong></p><p><code>Param</code> is a wrapper for your parameter value and any metadata you need to track about it. <code>Param</code> has flexible fields, but expects to always have a <code>:val</code> field – which is the default if you don&#39;t used a keyword argument:</p><pre><code class="language-julia hljs">par = Param(99.0)
@assert par.val == 99.0</code></pre><p>Internally <code>Param</code> uses a <code>NamedTuple</code> to be flexible for scripting. You can just add any fields you need. When parameters are built into a <code>Model</code>, they are standardised so that they all have the same fields, filling the gaps with <code>nothing</code>. </p><p>There are a few other &quot;privileged&quot; fields that have specific behaviour, if you use them. A <code>units</code> field will be combined other fields using <code>withunits</code>, and this is done by default for <code>val</code> when you run <code>stripparams</code> on the models - if there is actually a <code>units</code> field. The <code>InteractModel</code> in the sub-package InteractModels.jl may also combine <code>range</code> or <code>bounds</code> fields with <code>units</code> and use them to construct sliders.</p><p><code>Param</code> is also a <code>Number</code>, and should work as-is in a lot of models for convenience. But it can easily be stripped from objects using <code>stripparams</code>.</p><p><strong>What is a Model?</strong></p><p>A model is another wrapper type, this time for a whole model - whatever it may be. Its a mutable and untyped containers for you typed, immutable models, so they can be updated in a user interface or by using <code>setproperties!</code>. Letting you keep a handle to the updated version. <code>Model</code> gives you a Tables.jl interface, provides a table of parameters in the REPL, and give you some powerful tools for making changes to your model. </p><p>There is a more limited <code>StaticModel</code> variant where you need maximum performance and don&#39;t need a handle to the model object.</p><p>An <code>InteractModel</code> from the InteractModels.jl subpackage is identical to <code>Model</code>, with the addition of an Interact.jl interface. It accepts a function that generates anything that can go into a web page (like a plot) in response to model parameter changes you make with the generated sliders.</p><p><strong>Setting model values</strong></p><p><strong>Setting new values</strong></p><p>You can also add new columns to all model parameters directly from the model:</p><pre><code class="language-julia hljs">model[:bounds] = ((1.0, 4.0), (0.0, 1.0), (0.0, 0.1), (0.0, 100.0))</code></pre><p><strong>Swapping number types</strong></p><p>ModelParameters makes it very easy to make modifications to your model parameters. To update all model values to be <code>Float32</code>, you can simply do:  u</p><pre><code class="language-julia hljs">model[:val] = map(Float32, model[:val])</code></pre><p><strong>Tables.jl interface</strong></p><p>You can also save and import your model parameters to/from CSV or any other kind of Table or <code>DataFrame</code> using the Tables.jl interface:</p><pre><code class="language-julia hljs">update!(model, table)</code></pre><p><strong>Live Makie.jl interfaces</strong></p><p><code>MakieModel</code> will become available if you use <code>Makie.jl</code>, and can automatically generate  an interface with parameter sliders, and plots you define in the closure.</p><p><strong>Potential Problems</strong></p><p>If you define structs with type parameters that are not connected to fields, ModelParameters.jl will not be able to reconstruct them with new <code>Param</code> values, or use <code>stripparams</code> to remove the <code>Param</code> wrappers.</p><p>Defining <code>ConstructionBase.constructorof</code> from <a href="https://github.com/JuliaObjects/ConstructionBase.jl">ConstructionBase.jl</a> is the solution to this, and will also mean your objects can be used with other packages for immutable manipulation like Flatten.jl, Setfield.jl, Accessors.jl and BangBang.jl.</p><p><a href="https://github.com/JuliaObjects/ConstructionBaseExtras.jl">ConstructionBaseExtras.jl</a> also exists to add support to common packages, such as StaticArrays.jl arrays. Import it if you  need StaticArrays support, or open an issue to add support to additional packages.</p><p><strong>Note: Breaking change in 0.4.0</strong> With the introduction of weak extensions in Julia 1.9, ConstructionBase.jl and ConstructionBaseExtras.jl should not be loaded at the same time (see <a href="https://github.com/rafaqz/ModelParameters.jl/issues/52">this issue</a>).  ModelParameters.jl has dropped the direct dependency on ConstructionBase.jl in version 0.4.0. Users that employ Julia versions &lt;1.9 are advised to load ConstructionBaseExtras.jl themselves if StaticArrays.jl  support is needed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/ModelParameters.jl#LL3-L192">source</a></section></article><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.AbstractModel" href="#ModelParameters.AbstractModel"><code>ModelParameters.AbstractModel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Abstract supertype for model wrappers like <code>Model</code>, useful if you need to extend the behaviour of this package.</p><p><strong>Accessing <code>AbstactModel</code> parameters</strong></p><p>Fields can be accessed with <code>getindex</code>:</p><pre><code class="language-julia hljs">model = Model(obj)
@assert model[:val] isa Tuple
@assert model[:val] == model[:val]
@assert model[:units] == model[:units]</code></pre><p>To get a combined Tuple of <code>val</code> and <code>units</code>, use <a href="#ModelParameters.withunits"><code>withunits</code></a>.</p><p>The type name of the parent model component, and the field name are also available:</p><pre><code class="language-julia hljs">model[:component]
model[:fieldname]</code></pre><p><strong>Getting a <code>Vector</code> of parameter values</strong></p><p><code>Base</code> methods <code>collect</code>, <code>vec</code>, and <code>Array</code> return a vector of the result of  <code>model[:val]</code>. To get a vector of other parameter fields, simply <code>collect</code> the tuple:</p><pre><code class="language-julian hljs">boundsvec = collect(model[:bounds])</code></pre><p><strong>Tables.jl interface</strong></p><p>All <code>AbstractModel</code>s define the Tables.jl interface. This means their paremeters and parameter metadata can be converted to a <code>DataFrame</code> or CSV very easily:</p><pre><code class="language-julia hljs">df = DataFrame(model)</code></pre><p>Tables.rows will also return all <code>Param</code>s as a <code>Vector</code> of <code>NamedTuple</code>.</p><p>To update a model with params from a table, use <code>update!</code> or <code>update</code>:</p><pre><code class="language-julia hljs">update!(model, table)</code></pre><p><strong><code>AbstractModel</code> Interface: Defining your own model wrappers</strong></p><p>It may be simplest to use <code>ModelParameters.jl</code> on a wrapper type you also use for other  things. This is what DynamicGrids.jl does with <code>Ruleset</code>. It&#39;s straightforward to extend  the interface, nearly everything is taken care of by inheriting from <code>AbstractModel</code>. But  in some circumstances you will need to define additional methods.</p><p><code>AbstractModel</code> uses <code>Base.parent</code> to return the parent model object. Either use a field <code>:parent</code> on your <code>&lt;: AbstractModel</code> type, or add a  method to <code>Base.parent</code>. </p><p>With a custom <code>parent</code> field you will also need to define a method for  <a href="#ModelParameters.setparent!"><code>setparent!</code></a> and <a href="#ModelParameters.setparent"><code>setparent</code></a> that sets the correct field.</p><p>An <code>AbstractModel</code> with complicated type parameters may require a method of  <code>ConstructionBase.constructorof</code>.</p><p>To add custom <code>show</code> methods but still print the parameter table, you can use:</p><pre><code class="language-julia hljs">printparams(io::IO, model)</code></pre><p>That should be all you need to do.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/model.jl#LL2-L80">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.AbstractParam" href="#ModelParameters.AbstractParam"><code>ModelParameters.AbstractParam</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Abstract supertype for parameters. Theses are wrappers for model parameter values and metadata that are returned from <a href="#ModelParameters.params"><code>params</code></a>, and used in <code>getfield/setfield/getpropery/setproperty</code> methods and to generate the Tables.jl interface. They are stripped from the model with <a href="#ModelParameters.stripparams"><code>stripparams</code></a>.</p><p>An <code>AllParams</code> must define a <code>Base.parent</code> method that returns a <code>NamedTuple</code>, and a constructor that accepts a <code>NamedTuple</code>. It must have a <code>val</code> property, and should use <code>checkhasval</code> in its constructor.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/param.jl#LL1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.MakieModel" href="#ModelParameters.MakieModel"><code>ModelParameters.MakieModel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MakieModel(f, model)</code></pre><p>An <a href="#ModelParameters.AbstractModel"><code>AbstractModel</code></a> that generates its own Makie.jl interface. Each model <a href="#ModelParameters.Param"><code>Param</code></a> has a slider generated for it to update the model. Function <code>f</code> is passed a <code>Makie.GridLayout</code> to plot into and an <code>Observables.Observable</code> that holds the model object stripped of <code>Param</code>s, with the values of the sliders in  the interface. After any slider updates the <code>Observable</code> is updated.</p><p>Function <code>f</code> only runs once, on initialisation. In it <code>Makie.lift</code> should be used on the model to create an <code>Observable</code> which can be plotted into one or many <code>Makie.Axis</code> created in the <code>GridLayout</code>.</p><p><strong>Arguments</strong></p><ul><li><code>f</code>: a function that take a <code>GridLayout</code> and model object wrapped as an <code>Observable</code> as arguments.</li><li><code>model</code>: any object with <a href="#ModelParameters.Param"><code>Param</code></a>s objects in some fields.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>title</code>: <code>&quot;&quot;</code> set a window title, if you need it.</li><li><code>slider_kw</code>: An optional <code>NamedTuple</code> of keywords to pass to all sliders.</li><li><code>ncolumns</code>: Group sliders in <code>n</code> columns, <code>1</code> by default.</li><li><code>figure</code>: An optional Makie <code>Figure</code>.</li><li><code>layout</code>: An optional Makie <code>GridLayout</code> that gets passed to <code>f</code></li></ul><p><strong>Param fields</strong></p><p><code>Param</code> objects in the model can include keywords:</p><ul><li><code>label</code>: field to use instead of field names</li><li><code>range</code>: an <code>AbsractRange</code> of slider positions</li><li><code>bounds</code>: an <code>NTuple{2}</code> for min and max of slider ranges,    if <code>range</code> is not available.</li></ul><p>Withouth <code>range</code> or <code>bounds</code> the range will be guessed from <code>val</code>.</p><p><strong>Example</strong></p><p>This is a simple example where the model is a <code>NamedTuple</code> that changes the color patterns of </p><pre><code class="language-julia hljs">using ModelParameters, GLMakie, CSV

# Define some parameters
model = (; 
    noise=Param(0.5, bounds=(0.0, 1.0), label=&quot;Noise&quot;),
    color=Param(0.5, bounds=(0.0, 1.0), label=&quot;Color&quot;),
)

# Define a function that generates a random array from our model `m`
randarray(m) = max.(min.((rand(10, 10) .- 0.5) .* m.noise .+ m.color, 1.0), 0.0)

# Make an interactive model 
mm = MakieModel(model; ncolumns=2) do layout, model_obs
    # `model_obs` is our model with `Params` stripped and wrapped as an `Observable`.
    # We can `lift` it to run `f` and update a new 
    x = lift(randarray, model_obs)
    # Define an axis to plot into
    ax = Axis(layout[1, 1])
    # And plot a heatmap of the output of `f`
    heatmap!(ax, x; colorrange=(0, 1))
end

# We can save the parameters set in the interface
# to anything Tables.jl compatible, like csv
CSV.write(&quot;modelparams.csv&quot;, mm)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/makie.jl#LL1-L70">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.Model" href="#ModelParameters.Model"><code>ModelParameters.Model</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Model(x)</code></pre><p>A wrapper type for any model containing <a href="#ModelParameters.Param"><code>Param</code></a> parameters - essentially marking  that a custom struct or Tuple holds <code>Param</code> fields.</p><p>This allows you to index into the model as if it is a linear list of parameters, or named  columns of values and paramiter metadata. You can treat it as an iterable, or use the  Tables.jl interface to save or update the model to/from csv, a <code>DataFrame</code> or any source  that implements the Tables.jl interface.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/model.jl#LL204-L214">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.Param" href="#ModelParameters.Param"><code>ModelParameters.Param</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Param(p::NamedTuple)
Param(; kw...)
Param(val)</code></pre><p>A wrapper type that lets you extract model parameters and metadata about the model like bounding val, units priors, or anything else you want to attach.</p><p>The first argument is assigned to the <code>val</code> field, and if only keyword arguments are used, <code>val</code>, must be one of them. <code>val</code> is used as the number val if the model us run without stripping out the <code>Param</code> fields. <code>stripparams</code> also takes only the <code>:val</code> field.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/param.jl#LL88-L97">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.RealParam" href="#ModelParameters.RealParam"><code>ModelParameters.RealParam</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RealParam(p::NamedTuple)
RealParam(; kw...)
RealParam(val)</code></pre><p>A wrapper type that lets you extract <code>Real</code> typed model parameters and metadata about the model like bounding val, units priors, or anything else you want to attach.</p><p>The first argument is assigned to the <code>val</code> field, and if only keyword arguments are used, <code>val</code>, must be one of them. <code>val</code> is used as the number val if the model us run without stripping out the <code>Param</code> fields. <code>stripparams</code> also takes only the <code>:val</code> field.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/param.jl#LL111-L120">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.StaticModel" href="#ModelParameters.StaticModel"><code>ModelParameters.StaticModel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StaticModel(x)</code></pre><p>Like <a href="#ModelParameters.Model"><code>Model</code></a> but immutable. This means it can&#39;t be used as a handle to add columns to your model or update it in a user interface.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/model.jl#LL258-L263">source</a></section></article><h2 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.component-Union{Tuple{Type{T}}, Tuple{T}} where T" href="#ModelParameters.component-Union{Tuple{Type{T}}, Tuple{T}} where T"><code>ModelParameters.component</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">component(::Type{T}) where T</code></pre><p>Generates the identifier stored in the :component field of an <code>AbstractModel</code>. The default implementation simply uses <code>T.name.wrapper</code> which is the <code>UnionAll</code> type corresponding to the unparameterized type name of <code>T</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/model.jl#LL99-L105">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.groupparams-Tuple{AbstractModel}" href="#ModelParameters.groupparams-Tuple{AbstractModel}"><code>ModelParameters.groupparams</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">groupparams(m::AbstractModel, cols::Symbol...)</code></pre><p>Groups parameters in <code>m</code> hierarchically according to <code>cols</code>. A <code>Symbol</code> constructor must be defined for the value type of each parameter field (e.g. <code>String</code>, <code>Symbol</code>, and <code>Int</code> would all be valid by default). The returned value is a nested named tuple where the hierachical order follows the order of <code>cols</code>.</p><p>For example, we could group parameters first by component name, then by field name:</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; groupparams(Model((a=Param(1.0), b=Param(2.0))), :component, :fieldname)
(NamedTuple = (a = ..., b = ...),)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/model.jl#LL299-L313">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.mapflat-Union{Tuple{T}, Tuple{Any, Any}} where T" href="#ModelParameters.mapflat-Union{Tuple{T}, Tuple{Any, Any}} where T"><code>ModelParameters.mapflat</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mapflat(f, collection; maptype::Type=Union{NamedTuple,Tuple,AbstractArray})</code></pre><p>&quot;Flattened&quot; version of <code>map</code> where <code>f</code> is applied to all nested non-collection elements of <code>x</code>. The transformed result is returned with the nested structure of the input <code>x</code> unchanged. Note that this differs from <code>flatmap</code> in functional settings, which is typically just <code>map</code> followed by <code>flatten</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; mapflat(x -&gt; 2*x, (a = (b = (1,)), c = (d = (2,))))
(a = (b = (2,)), c = (d = (4,)))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/model.jl#LL323-L335">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.params" href="#ModelParameters.params"><code>ModelParameters.params</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">params(object)
params(model::AbstractModel)</code></pre><p>Returns a tuple of all <code>Param</code>s in the model or arbitrary object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/interface.jl#LL1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.printparams" href="#ModelParameters.printparams"><code>ModelParameters.printparams</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">printparams(object)
printparams(io::IO, object)</code></pre><p>Prints a table of all <code>Param</code>s in the object, similar to what is printed in the repl for <code>AbstractModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/interface.jl#LL9-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.setparent" href="#ModelParameters.setparent"><code>ModelParameters.setparent</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setparent(model::AbstractModel, x)</code></pre><p>Internal interface method to define for custom <code>AbstractModel</code> with a different field for <code>parent</code>.</p><p>Set the parent object and return the rebuilt model. Must be defined  if the parent field of an <code>AbstractModel</code> is not <code>:parent</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/interface.jl#LL85-L93">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.setparent!" href="#ModelParameters.setparent!"><code>ModelParameters.setparent!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setparent!(model::MutableModel, x)</code></pre><p>Internal interface method to define for custom <code>AbstractModel</code> with a different field for <code>parent</code>.</p><p>Set the parent object. Must be defined if the parent field of an <code>AbstractModel</code> is not <code>:parent</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/interface.jl#LL74-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.stripparams" href="#ModelParameters.stripparams"><code>ModelParameters.stripparams</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">stripparams(object)</code></pre><p>Strips all <code>AbstractParam</code> from an object, replacing them with the <code>val</code>  field, or a combination of <code>val</code> and <code>units</code> if a <code>units</code> field exists.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/interface.jl#LL18-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.stripunits" href="#ModelParameters.stripunits"><code>ModelParameters.stripunits</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">stripunits(model::AbstractModel, xs)
stripunits(param::AbstractParam, x)</code></pre><p>Returns the <code>x</code> or <code>xs</code> divided by their corresponding units field, if it exists.</p><p>It there is no units field, and x has units, it will be returned with units! It you want to simply remove all units, using Unitful.ustrip.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/interface.jl#LL60-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.update" href="#ModelParameters.update"><code>ModelParameters.update</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update(m::AbstractModel, table)</code></pre><p>Update the model from an object that implements the Tables.jl interface, returning a new, updated object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/interface.jl#LL36-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.update!" href="#ModelParameters.update!"><code>ModelParameters.update!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update!(m::MutableModel, table)</code></pre><p>Update the model in-place from an object that implements the Tables.jl interface.</p><p>Note: the parent object can be immutable, it will be completely rebuilt.  But the wrapper <code>AbstractModel</code> is mutable, such as <code>Model</code> or <code>InteractModel</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/interface.jl#LL26-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ModelParameters.withunits" href="#ModelParameters.withunits"><code>ModelParameters.withunits</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">withunits(object, [fieldname])
withunits(model::AbstractModel, [fieldname])
withunits(param::AbstractParam, [fieldname])</code></pre><p>Returns the field specifed by <code>fieldname</code> (by default <code>:val</code>) for a single <code>Param</code>,  or a tuple of the <code>Param</code>s in a <code>Model</code> or arbitrary object. </p><p>If there is a <code>units</code> field the returned value will be a combination of the specied field  and the <code>units</code> fields. </p><p>If there is no units field or a specific <code>Param</code>s <code>units</code> fields contains <code>nothing</code>,  the field value is returned unchanged.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rafaqz/ModelParameters.jl/blob/a7925234e7f6a62889dacdff13a97ec70c21e0be/src/interface.jl#LL44-L57">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="interactmodels/">InteractModels »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Monday 27 October 2025 11:10">Monday 27 October 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
